<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soul Toy - Canvas Animation System Demo</title>
		<!-- FAVICON CODE -->
	<link rel="icon" type="image/svg+xml" href="../../logo/favicon.svg">
    <link rel="stylesheet" href="../../css/navigation.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1e3a2e 0%, #2d5a3d 50%, #1a2e20 100%);
            min-height: 100vh;
            padding: 16px;
            padding-top: 90px !important;
            overflow-x: hidden;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 32px;
            color: white;
        }

        .header h1 {
            font-size: 32px;
            font-weight: 700;
            margin: 0 0 8px 0;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
            background: linear-gradient(135deg, #84cc16, #65a30d);
            background-clip: text;
        }

        .header p {
            font-size: 18px;
            opacity: 0.9;
            color: #bbf7d0;
        }

        /* Main Demo Layout */
        .demo-layout {
            display: grid;
            grid-template-columns: 380px 1fr;
            gap: 24px;
            margin-bottom: 32px;
        }

        @media (max-width: 1400px) {
            .demo-layout {
                grid-template-columns: 1fr;
            }
        }

        /* Control Panel */
        .control-panel {
            background: rgba(34, 59, 46, 0.4);
            border-radius: 20px;
            padding: 24px;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(132, 204, 22, 0.3);
            height: fit-content;
        }

        .control-title {
            color: #84cc16;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Prompt Categories */
        .category-section {
            margin-bottom: 24px;
        }

        .category-label {
            color: rgba(187, 247, 208, 0.9);
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 12px;
        }

        .prompt-buttons {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .prompt-button {
            background: rgba(34, 59, 46, 0.5);
            border: 1px solid rgba(132, 204, 22, 0.4);
            color: white;
            padding: 12px 16px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 13px;
            text-align: left;
        }

        .prompt-button:hover {
            background: rgba(132, 204, 22, 0.2);
            border-color: rgba(132, 204, 22, 0.6);
            transform: translateY(-2px);
        }

        .prompt-button.active {
            background: rgba(132, 204, 22, 0.3);
            border-color: rgba(132, 204, 22, 0.7);
        }

        /* Animation Settings */
        .settings-section {
            margin-bottom: 24px;
        }

        .setting-item {
            background: rgba(34, 59, 46, 0.4);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 12px;
            border-left: 4px solid #84cc16;
        }

        .setting-label {
            color: rgba(187, 247, 208, 0.8);
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .setting-value {
            color: white;
            font-size: 16px;
            font-weight: 600;
        }

        /* Canvas Display */
        .canvas-display {
            background: rgba(34, 59, 46, 0.2);
            border-radius: 20px;
            padding: 24px;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(132, 204, 22, 0.3);
            position: relative;
        }

        /* Canvas Area */
        .canvas-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 24px;
            border: 3px solid rgba(132, 204, 22, 0.4);
            position: relative;
            min-height: 400px;
            overflow: hidden;
        }

        .canvas-area {
            width: 100%;
            height: 360px;
            position: relative;
            background: linear-gradient(135deg, #fefce8, #f7fee7);
            border-radius: 12px;
            overflow: hidden;
        }

        /* Animated Elements */
        .animated-element {
            position: absolute;
            transition: all 0.5s ease;
        }

        .stickman {
            width: 40px;
            height: 60px;
            font-size: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .wheel {
            width: 50px;
            height: 50px;
            border: 4px solid #84cc16;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(132, 204, 22, 0.1);
        }

        .wheel.spinning {
            animation: spin 2s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .house {
            width: 80px;
            height: 60px;
            background: #8b4513;
            position: relative;
            border-radius: 4px;
        }

        .house::before {
            content: '';
            position: absolute;
            top: -20px;
            left: -10px;
            width: 0;
            height: 0;
            border-left: 50px solid transparent;
            border-right: 50px solid transparent;
            border-bottom: 30px solid #dc2626;
        }

        .smoke {
            width: 6px;
            height: 30px;
            background: #d1d5db;
            border-radius: 3px;
            position: absolute;
            top: -50px;
            right: 20px;
            opacity: 0;
            animation: smoke-rise 2s ease-in-out infinite;
        }

        @keyframes smoke-rise {
            0% { opacity: 0.8; transform: translateY(0) scale(1); }
            100% { opacity: 0; transform: translateY(-20px) scale(1.5); }
        }

        .math-object {
            width: 30px;
            height: 30px;
            background: #3b82f6;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 14px;
        }

        .car {
            width: 60px;
            height: 30px;
            background: #ef4444;
            border-radius: 4px;
            position: relative;
        }

        .car::after {
            content: 'üöó';
            position: absolute;
            top: -5px;
            left: 10px;
            font-size: 24px;
        }

        .moving {
            animation: move-across 3s ease-in-out infinite;
        }

        @keyframes move-across {
            0% { transform: translateX(0); }
            50% { transform: translateX(100px); }
            100% { transform: translateX(0); }
        }

        .walking {
            animation: walk-cycle 1s ease-in-out infinite;
        }

        @keyframes walk-cycle {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-5deg); }
            75% { transform: rotate(5deg); }
        }

        .waving {
            animation: wave 1.5s ease-in-out infinite;
        }

        @keyframes wave {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(20deg); }
        }

        /* AI Response Status */
        .response-status {
            background: rgba(34, 59, 46, 0.4);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 24px;
            border-left: 4px solid #84cc16;
        }

        .status-header {
            color: #84cc16;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status-content {
            color: rgba(187, 247, 208, 0.9);
            font-size: 14px;
            line-height: 1.5;
            min-height: 60px;
        }

        /* Animation Timeline */
        .timeline-section {
            background: rgba(34, 59, 46, 0.4);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 24px;
            border: 1px solid rgba(132, 204, 22, 0.2);
        }

        .timeline-header {
            color: #84cc16;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
        }

        .timeline-steps {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .timeline-step {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px 12px;
            background: rgba(132, 204, 22, 0.1);
            border-radius: 8px;
            font-size: 14px;
            color: rgba(187, 247, 208, 0.9);
            opacity: 0.5;
            transition: all 0.3s ease;
        }

        .timeline-step.active {
            opacity: 1;
            background: rgba(132, 204, 22, 0.2);
            border-left: 3px solid #84cc16;
        }

        .step-icon {
            font-size: 16px;
        }

        /* process Button */
        .process-button {
            background: linear-gradient(135deg, #84cc16, #65a30d);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 16px;
        }

        .process-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(132, 204, 22, 0.4);
        }

        .process-button:disabled {
            background: rgba(75, 85, 99, 0.5);
            color: #9ca3af;
            cursor: not-allowed;
            transform: none;
        }

        /* Simulation Messages */
        .simulation-message {
            background: rgba(132, 204, 22, 0.1);
            border: 1px solid rgba(132, 204, 22, 0.3);
            border-radius: 8px;
            padding: 12px;
            margin-top: 16px;
            color: #84cc16;
            font-size: 14px;
            text-align: center;
            display: none;
        }

        /* Comparison Section */
        .comparison-section {
            background: rgba(34, 59, 46, 0.2);
            border-radius: 20px;
            padding: 24px;
            margin-top: 24px;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(132, 204, 22, 0.3);
        }

        .comparison-title {
            color: white;
            font-size: 20px;
            font-weight: 600;
            text-align: center;
            margin-bottom: 24px;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }

        @media (max-width: 768px) {
            .comparison-grid {
                grid-template-columns: 1fr;
            }
        }

        .comparison-item {
            background: rgba(34, 59, 46, 0.3);
            border-radius: 12px;
            padding: 20px;
            border: 2px solid;
        }

        .traditional-canvas {
            border-color: #ef4444;
        }

        .soul-canvas {
            border-color: #84cc16;
        }

        .comparison-item h4 {
            margin-bottom: 16px;
            font-size: 16px;
            font-weight: 600;
            color: white;
        }

        .comparison-list {
            list-style: none;
            margin: 0;
        }

        .comparison-list li {
            margin-bottom: 8px;
            position: relative;
            padding-left: 16px;
            font-size: 14px;
            line-height: 1.4;
            color: rgba(187, 247, 208, 0.9);
        }

        .comparison-list li::before {
            content: "‚Ä¢";
            position: absolute;
            left: 0;
            font-weight: bold;
        }

        .traditional-canvas .comparison-list li::before {
            color: #ef4444;
        }

        .soul-canvas .comparison-list li::before {
            color: #84cc16;
        }

        /* Text overlay for responses */
        .text-overlay {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(132, 204, 22, 0.9);
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            opacity: 0;
            transition: all 0.3s ease;
        }

        .text-overlay.show {
            opacity: 1;
        }
		
        /* Action Buttons */
        .action-section {
            text-align: center;
            margin-top: 3rem;
        }

        .action-button {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            flex-wrap: wrap;
        }

        .action-button {
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
            padding: 1rem 2rem;
            text-decoration: none;
            border-radius: 12px;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.3s ease;
            min-width: 200px;
            justify-content: center;
        }
		
		.demo-button {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
        }

        .demo-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
        }

        .docs-button {
            background: rgba(255, 255, 255, 0.1);
            color: #e2e8f0;
            border: 1px solid rgba(226, 232, 240, 0.2);
        }

        .docs-button:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }
		
    </style>
</head>
<body>
    <!-- Navigation -->
    <div>
        <div id="navigation-placeholder"></div>
    </div>

    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üé® Soul Toy Canvas</h1>
            <p>AI responds through visual drawing and animation - transforming communication into creative expression</p>
        </div>

        <!-- Main Demo Layout -->
        <div class="demo-layout">
            <!-- Control Panel -->
            <div class="control-panel">
                <div class="control-title">
                    üé≠ Visual Prompts
                </div>

                <!-- Educational Prompts -->
                <div class="category-section">
                    <div class="category-label">Educational Questions:</div>
                    <div class="prompt-buttons">
                        <button class="prompt-button active" data-prompt="wheel">
                            üé° "How do wheels work?"
                        </button>
                        <button class="prompt-button" data-prompt="addition">
                            ‚ûï "What is 2 + 3?"
                        </button>
                        <button class="prompt-button" data-prompt="walking">
                            üö∂ "Show me how to walk"
                        </button>
                    </div>
                </div>

                <!-- Creative Prompts -->
                <div class="category-section">
                    <div class="category-label">Creative Collaboration:</div>
                    <div class="prompt-buttons">
                        <button class="prompt-button" data-prompt="house">
                            üè† "Add life to my house drawing"
                        </button>
                        <button class="prompt-button" data-prompt="car">
                            üöó "Make my car move around"
                        </button>
                        <button class="prompt-button" data-prompt="story">
                            üìñ "Tell me a story with pictures"
                        </button>
                    </div>
                </div>

                <!-- Animation Settings -->
                <div class="settings-section">
                    <div class="category-label">Animation Controls:</div>
                    
                    <div class="setting-item">
                        <div class="setting-label">Drawing Speed</div>
                        <div class="setting-value" id="drawingSpeed">Natural Pace</div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-label">Animation Style</div>
                        <div class="setting-value" id="animationStyle">Child-Friendly</div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-label">Explanation Level</div>
                        <div class="setting-value" id="explanationLevel">Simple & Clear</div>
                    </div>
                </div>

                <button class="process-button" id="generateResponse">
                    Generate AI Visual Response
                </button>

                <div id="simulationMessage" class="simulation-message">
                    AI creating visual response...
                </div>
            </div>

            <!-- Canvas Display -->
            <div class="canvas-display">
                <!-- Canvas Area -->
                <div class="canvas-container">
                    <div class="canvas-area" id="canvasArea">
                        <div class="text-overlay" id="textOverlay">
                            AI will draw and animate the response here
                        </div>
                    </div>
                </div>

                <!-- AI Response Status -->
                <div class="response-status">
                    <div class="status-header">
                        ü§ñ AI Visual Response System
                    </div>
                    <div class="status-content" id="statusContent">
                        Select a prompt to see how the AI responds through drawing and animation instead of just text. Visual communication makes learning more engaging and memorable for children.
                    </div>
                </div>

                <!-- Animation Timeline -->
                <div class="timeline-section">
                    <div class="timeline-header">Response Timeline</div>
                    <div class="timeline-steps" id="timelineSteps">
                        <div class="timeline-step" id="step1">
                            <div class="step-icon">üéØ</div>
                            <div>Analyze child's question</div>
                        </div>
                        <div class="timeline-step" id="step2">
                            <div class="step-icon">üé®</div>
                            <div>Plan visual response</div>
                        </div>
                        <div class="timeline-step" id="step3">
                            <div class="step-icon">‚úèÔ∏è</div>
                            <div>Draw elements on canvas</div>
                        </div>
                        <div class="timeline-step" id="step4">
                            <div class="step-icon">üé¨</div>
                            <div>Animate demonstration</div>
                        </div>
                        <div class="timeline-step" id="step5">
                            <div class="step-icon">üí¨</div>
                            <div>Provide explanation</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Comparison Section -->
        <div class="comparison-section">
            <h3 class="comparison-title">Traditional AI Text Responses vs Soul Toy Visual Canvas System</h3>
            <div class="comparison-grid">
                <div class="comparison-item traditional-canvas">
                    <h4>Traditional AI Text Responses</h4>
                    <ul class="comparison-list">
                        <li>Text-only explanations requiring reading comprehension</li>
                        <li>Static information without visual demonstration</li>
                        <li>No creative collaboration or drawing assistance</li>
                        <li>Abstract concepts difficult for children to grasp</li>
                        <li>Limited engagement and attention retention</li>
                        <li>No visual memory reinforcement</li>
                        <li>Passive learning experience without interaction</li>
                    </ul>
                </div>
                <div class="comparison-item soul-canvas">
                    <h4>Soul Toy Visual Canvas Animation</h4>
                    <ul class="comparison-list">
                        <li>Visual responses through drawing and animation</li>
                        <li>Demonstrates concepts through moving illustrations</li>
                        <li>Interactive creative collaboration on child's drawings</li>
                        <li>Makes abstract concepts concrete and understandable</li>
                        <li>High engagement through visual storytelling</li>
                        <li>Creates visual memories that enhance learning retention</li>
                        <li>Active learning through watch, understand, and create cycles</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
	
	<!-- Action Buttons -->
	<section class="action-section">
		<div class="action-button">
			<a href="../../demos/systems/soul-toy-avatar-demo.html" class="action-button demo-button">
				<span>üéÆ</span>
				Soul Toy - Avatar Demo
			</a>
			<a href="../../system-reference/soul-toy-overview.html" class="action-button demo-button">
				<span>üéÆ</span>
				Soul Toy Overview
			</a>
			<a href="https://github.com/Neuron-Soul-AI/Neuron-Soul-AI/blob/main/03%20-%20INNOVATIONS/Neuron%20Soul%20Toy%20-%20Complete%20Technical%20Documentation.md" class="action-button docs-button">
				<span>üìö</span>
				Technical Documentation
			</a>
		</div>
	</section>

    <script>
        let currentPrompt = 'wheel';
        let isGenerating = false;
        let animationElements = [];

        // Prompt configurations
        const prompts = {
            wheel: {
                name: "How Wheels Work",
                description: "WHEEL DEMONSTRATION ACTIVE! AI drawing a wheel and animating its rotation to show how circular motion enables movement. Visual physics lesson with rolling demonstration and explanation of why wheels make transportation easier.",
                timeline: [
                    "Understanding wheel mechanics question",
                    "Planning circular motion demonstration", 
                    "Drawing wheel with spokes and axle",
                    "Animating wheel rotation and movement",
                    "Explaining physics of rolling motion"
                ],
                elements: [
                    { type: 'wheel', x: 100, y: 200, delay: 1000 },
                    { type: 'wheel', x: 200, y: 200, delay: 1500 },
                    { type: 'wheel', x: 300, y: 200, delay: 2000 }
                ],
                explanation: "Wheels work by reducing friction! See how they roll smoothly?"
            },
            addition: {
                name: "Visual Math Addition",
                description: "MATH VISUALIZATION ACTIVE! AI drawing objects and grouping them to demonstrate addition visually. Creates concrete understanding of abstract mathematical concepts through interactive visual counting and grouping.",
                timeline: [
                    "Analyzing addition problem structure",
                    "Planning visual counting demonstration",
                    "Drawing individual counting objects",
                    "Grouping objects to show addition",
                    "Revealing final sum with animation"
                ],
                elements: [
                    { type: 'math', x: 80, y: 150, delay: 1000, content: '1' },
                    { type: 'math', x: 130, y: 150, delay: 1200, content: '2' },
                    { type: 'math', x: 250, y: 150, delay: 1800, content: '3' },
                    { type: 'math', x: 300, y: 150, delay: 2000, content: '4' },
                    { type: 'math', x: 350, y: 150, delay: 2200, content: '5' }
                ],
                explanation: "2 + 3 = 5! Count along with the blue circles!"
            },
            walking: {
                name: "Walking Animation",
                description: "MOVEMENT DEMONSTRATION ACTIVE! AI creating an animated character showing walking motion through step-by-step movement patterns. Breaks down complex motor coordination into understandable visual components.",
                timeline: [
                    "Understanding walking mechanics request",
                    "Planning step-by-step movement demo",
                    "Drawing walking character figure",
                    "Animating walking cycle motion",
                    "Explaining balance and coordination"
                ],
                elements: [
                    { type: 'stickman', x: 100, y: 200, delay: 1000, animation: 'walking' }
                ],
                explanation: "Walking is left foot, right foot, balance! Watch the rhythm!"
            },
            house: {
                name: "House With Life",
                description: "CREATIVE COLLABORATION ACTIVE! AI adding animated elements to enhance child's house drawing. Demonstrates how static art can come alive through imagination and creative additions like animated smoke and movement.",
                timeline: [
                    "Analyzing child's house drawing",
                    "Planning life-giving enhancements",
                    "Drawing house base structure",
                    "Adding animated smoke effects",
                    "Creating living, breathing home"
                ],
                elements: [
                    { type: 'house', x: 200, y: 250, delay: 1000 },
                    { type: 'smoke', x: 260, y: 200, delay: 2000 }
                ],
                explanation: "Your house is alive! See the smoke rising from the chimney?"
            },
            car: {
                name: "Moving Car Animation",
                description: "MOTION CREATIVITY ACTIVE! AI bringing child's car drawing to life through movement animation. Shows how static drawings can become dynamic stories through simple motion and creative imagination.",
                timeline: [
                    "Recognizing car drawing for animation",
                    "Planning movement demonstration",
                    "Drawing car with motion elements",
                    "Animating car movement patterns",
                    "Creating transportation story"
                ],
                elements: [
                    { type: 'car', x: 100, y: 250, delay: 1000, animation: 'moving' }
                ],
                explanation: "Vroom! Your car is driving around! Where should it go next?"
            },
            story: {
                name: "Visual Storytelling",
                description: "STORY ANIMATION ACTIVE! AI creating an animated story with characters that move and interact. Demonstrates visual narrative through sequential drawing and character animation, making storytelling immersive and engaging.",
                timeline: [
                    "Planning visual story narrative",
                    "Designing story characters",
                    "Drawing story scene elements",
                    "Animating character interactions",
                    "Narrating through visual sequence"
                ],
                elements: [
                    { type: 'stickman', x: 80, y: 200, delay: 1000, animation: 'waving' },
                    { type: 'house', x: 200, y: 250, delay: 1500 },
                    { type: 'stickman', x: 320, y: 200, delay: 2000, animation: 'walking' }
                ],
                explanation: "Once upon a time, friends met by a cozy house and waved hello!"
            }
        };

        // Include Navigation Bar
        fetch('../../includes/navigation2L.html')
            .then(response => response.text())
            .then(html => {
                document.getElementById('navigation-placeholder').innerHTML = html;
            });

        // Event Listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Prompt selection
            document.querySelectorAll('.prompt-button').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('.prompt-button').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentPrompt = this.dataset.prompt;
                    updatePromptDisplay();
                });
            });

            // Generate response
            const generateButton = document.getElementById('generateResponse');
            if (generateButton) {
                generateButton.addEventListener('click', function(e) {
                    e.preventDefault();
                    generateVisualResponse();
                });
            }

            // Initialize display
            updatePromptDisplay();
        });

        function updatePromptDisplay() {
            const prompt = prompts[currentPrompt];
            
            // Update status content
            document.getElementById('statusContent').textContent = `"${prompt.name}" prompt selected. Ready to demonstrate AI visual response through drawing and animation.`;
            
            // Clear canvas
            clearCanvas();
        }

        function clearCanvas() {
            const canvas = document.getElementById('canvasArea');
            // Remove all animated elements except text overlay
            animationElements.forEach(element => {
                if (element.parentNode) {
                    element.parentNode.removeChild(element);
                }
            });
            animationElements = [];
            
            // Reset timeline
            document.querySelectorAll('.timeline-step').forEach(step => {
                step.classList.remove('active');
            });
            
            // Hide text overlay
            document.getElementById('textOverlay').classList.remove('show');
        }

        function createElement(config) {
            const element = document.createElement('div');
            element.className = 'animated-element';
            
            if (config.type === 'wheel') {
                element.className += ' wheel';
                element.innerHTML = '‚ö™';
            } else if (config.type === 'math') {
                element.className += ' math-object';
                element.textContent = config.content || '1';
            } else if (config.type === 'stickman') {
                element.className += ' stickman';
                element.innerHTML = 'üö∂';
            } else if (config.type === 'house') {
                element.className += ' house';
            } else if (config.type === 'smoke') {
                element.className += ' smoke';
            } else if (config.type === 'car') {
                element.className += ' car';
            }
            
            element.style.left = `${config.x}px`;
            element.style.top = `${config.y}px`;
            element.style.opacity = '0';
            
            return element;
        }

        async function generateVisualResponse() {
            if (isGenerating) return;
            
            isGenerating = true;
            const prompt = prompts[currentPrompt];
            
            const button = document.getElementById('generateResponse');
            const message = document.getElementById('simulationMessage');
            
            // Update button
            button.disabled = true;
            button.textContent = 'AI Drawing Response...';
            
            // Show message
            message.style.display = 'block';
            message.textContent = 'AI analyzing prompt and preparing visual response...';
            
            try {
                // Clear previous elements
                clearCanvas();
                
                const canvas = document.getElementById('canvasArea');
                
                // Phase 1-5: Timeline progression
                for (let i = 0; i < 5; i++) {
                    const step = document.getElementById(`step${i + 1}`);
                    step.classList.add('active');
                    message.textContent = prompt.timeline[i];
                    await delay(800);
                }
                
                // Drawing phase - create elements
                message.textContent = 'AI drawing on canvas...';
                
                for (const elementConfig of prompt.elements) {
                    await delay(elementConfig.delay - (elementConfig === prompt.elements[0] ? 1000 : prompt.elements[prompt.elements.indexOf(elementConfig) - 1].delay));
                    
                    const element = createElement(elementConfig);
                    canvas.appendChild(element);
                    animationElements.push(element);
                    
                    // Fade in element
                    setTimeout(() => {
                        element.style.opacity = '1';
                        
                        // Add specific animations
                        if (elementConfig.type === 'wheel') {
                            element.classList.add('spinning');
                        }
                        if (elementConfig.animation) {
                            element.classList.add(elementConfig.animation);
                        }
                    }, 100);
                }
                
                // Show explanation
                await delay(1000);
                const textOverlay = document.getElementById('textOverlay');
                textOverlay.textContent = prompt.explanation;
                textOverlay.classList.add('show');
                
                // Update status
                document.getElementById('statusContent').textContent = prompt.description;
                
                message.textContent = 'Visual response complete! AI has demonstrated the concept through drawing and animation.';
                
            } catch (error) {
                console.error('Error during generation:', error);
                message.textContent = 'Visual response generation completed.';
            }
            
            // Reset after delay
            setTimeout(() => {
                isGenerating = false;
                button.disabled = false;
                button.textContent = 'Generate AI Visual Response';
                message.style.display = 'none';
            }, 3000);
        }

        function delay(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }
    </script>
</body>
</html>