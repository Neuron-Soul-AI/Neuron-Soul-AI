<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neuron Symbiosis - Cross-Cluster Collaboration Demo</title>
		<!-- FAVICON CODE -->
	<link rel="icon" type="image/svg+xml" href="../../logo/favicon.svg">
    <link rel="stylesheet" href="../../css/navigation.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a2234 0%, #2d3748 50%, #1a202c 100%);
            min-height: 100vh;
            padding: 16px;
            padding-top: 90px !important;
            overflow-x: hidden;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 32px;
            color: white;
        }

        .header h1 {
            font-size: 32px;
            font-weight: 700;
            margin: 0 0 8px 0;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
            background: linear-gradient(135deg, #81e6d9, #68d391);
            background-clip: text;
        }

        .header p {
            font-size: 18px;
            opacity: 0.9;
            color: #a7f3d0;
        }

        /* Main Demo Layout */
        .demo-layout {
            display: grid;
            grid-template-columns: 380px 1fr;
            gap: 24px;
            margin-bottom: 32px;
        }

        @media (max-width: 1400px) {
            .demo-layout {
                grid-template-columns: 1fr;
            }
        }

        /* Control Panel */
        .control-panel {
            background: rgba(16, 185, 129, 0.1);
            border-radius: 20px;
            padding: 24px;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(129, 230, 217, 0.2);
            height: fit-content;
        }

        .control-title {
            color: #81e6d9;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Collaboration Scenarios */
        .scenario-section {
            margin-bottom: 24px;
        }

        .scenario-label {
            color: rgba(167, 243, 208, 0.9);
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 12px;
        }

        .scenario-buttons {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .scenario-button {
            background: rgba(16, 185, 129, 0.2);
            border: 1px solid rgba(129, 230, 217, 0.3);
            color: white;
            padding: 12px 16px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 13px;
            text-align: left;
        }

        .scenario-button:hover {
            background: rgba(129, 230, 217, 0.2);
            border-color: rgba(129, 230, 217, 0.5);
            transform: translateY(-2px);
        }

        .scenario-button.active {
            background: rgba(129, 230, 217, 0.3);
            border-color: rgba(129, 230, 217, 0.6);
        }

        /* Collaboration Metrics */
        .metrics-section {
            margin-bottom: 24px;
        }

        .metric-item {
            background: rgba(16, 185, 129, 0.15);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 12px;
            border-left: 4px solid #81e6d9;
        }

        .metric-label {
            color: rgba(167, 243, 208, 0.8);
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .metric-value {
            color: white;
            font-size: 18px;
            font-family: monospace;
            font-weight: 600;
        }

        .metric-unit {
            font-size: 12px;
            opacity: 0.8;
            margin-left: 4px;
        }

        /* Symbiosis Display */
        .symbiosis-display {
            background: rgba(16, 185, 129, 0.05);
            border-radius: 20px;
            padding: 24px;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(129, 230, 217, 0.2);
            position: relative;
        }

        /* Cluster Network Visualization */
        .cluster-network {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 24px;
            border: 2px solid rgba(129, 230, 217, 0.3);
            position: relative;
            min-height: 400px;
            overflow: hidden;
        }

        .clusters-container {
            position: relative;
            width: 100%;
            height: 100%;
            min-height: 360px;
        }

        .cluster-node {
            position: absolute;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #4fd1c7, #38b2ac);
            border: 3px solid #81e6d9;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(129, 230, 217, 0.3);
        }

        .cluster-node:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(129, 230, 217, 0.5);
        }

        .cluster-node.active {
            background: linear-gradient(135deg, #68d391, #48bb78);
            border-color: #68d391;
            transform: scale(1.15);
            animation: pulse 2s infinite;
        }

        .cluster-node.collaborating {
            background: linear-gradient(135deg, #fbb6ce, #f687b3);
            border-color: #f687b3;
            animation: collaborate 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 6px 20px rgba(104, 211, 145, 0.4); }
            50% { box-shadow: 0 8px 25px rgba(104, 211, 145, 0.7); }
        }

        @keyframes collaborate {
            0%, 100% { transform: scale(1.1); }
            50% { transform: scale(1.2); }
        }

        .cluster-icon {
            font-size: 20px;
            margin-bottom: 2px;
        }

        .cluster-name {
            font-size: 9px;
            font-weight: 600;
            color: white;
            text-align: center;
        }

        /* Connection Lines */
        .connection-line {
            position: absolute;
            height: 2px;
            background: linear-gradient(90deg, transparent, #81e6d9, transparent);
            transform-origin: left center;
            opacity: 0;
            transition: all 0.5s ease;
            z-index: 1;
        }

        .connection-line.active {
            opacity: 1;
            animation: dataFlow 2s linear infinite;
        }

        @keyframes dataFlow {
            0% { background-position: -100% 0; }
            100% { background-position: 100% 0; }
        }

        /* Collaboration Status */
        .collaboration-status {
            background: rgba(16, 185, 129, 0.15);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 24px;
            border-left: 4px solid #81e6d9;
        }

        .status-header {
            color: #81e6d9;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status-content {
            color: rgba(167, 243, 208, 0.9);
            font-size: 14px;
            line-height: 1.5;
            min-height: 60px;
        }

        /* Symbiosis Effects */
        .effects-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 24px;
        }

        .effect-card {
            background: rgba(16, 185, 129, 0.15);
            border-radius: 12px;
            padding: 16px;
            border: 1px solid rgba(129, 230, 217, 0.2);
            transition: all 0.3s ease;
        }

        .effect-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }

        .effect-icon {
            font-size: 16px;
        }

        .effect-name {
            color: white;
            font-size: 14px;
            font-weight: 600;
        }

        .effect-value {
            color: #81e6d9;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .effect-description {
            color: rgba(167, 243, 208, 0.8);
            font-size: 12px;
            line-height: 1.4;
        }

        /* process Button */
        .process-button {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 16px;
        }

        .process-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.4);
        }

        .process-button:disabled {
            background: rgba(75, 85, 99, 0.5);
            color: #9ca3af;
            cursor: not-allowed;
            transform: none;
        }

        /* Simulation Messages */
        .simulation-message {
            background: rgba(129, 230, 217, 0.1);
            border: 1px solid rgba(129, 230, 217, 0.3);
            border-radius: 8px;
            padding: 12px;
            margin-top: 16px;
            color: #81e6d9;
            font-size: 14px;
            text-align: center;
            display: none;
        }

        /* Comparison Section */
        .comparison-section {
            background: rgba(16, 185, 129, 0.05);
            border-radius: 20px;
            padding: 24px;
            margin-top: 24px;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(129, 230, 217, 0.2);
        }

        .comparison-title {
            color: white;
            font-size: 20px;
            font-weight: 600;
            text-align: center;
            margin-bottom: 24px;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }

        @media (max-width: 768px) {
            .comparison-grid {
                grid-template-columns: 1fr;
            }
        }

        .comparison-item {
            background: rgba(16, 185, 129, 0.1);
            border-radius: 12px;
            padding: 20px;
            border: 2px solid;
        }

        .traditional-symbiosis {
            border-color: #ef4444;
        }

        .neuron-symbiosis {
            border-color: #81e6d9;
        }

        .comparison-item h4 {
            margin-bottom: 16px;
            font-size: 16px;
            font-weight: 600;
            color: white;
        }

        .comparison-list {
            list-style: none;
            margin: 0;
        }

        .comparison-list li {
            margin-bottom: 8px;
            position: relative;
            padding-left: 16px;
            font-size: 14px;
            line-height: 1.4;
            color: rgba(167, 243, 208, 0.9);
        }

        .comparison-list li::before {
            content: "•";
            position: absolute;
            left: 0;
            font-weight: bold;
        }

        .traditional-symbiosis .comparison-list li::before {
            color: #ef4444;
        }

        .neuron-symbiosis .comparison-list li::before {
            color: #81e6d9;
        }
		
        /* Action Buttons */
        .action-section {
            text-align: center;
            margin-top: 3rem;
        }

        .action-button {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            flex-wrap: wrap;
        }

        .action-button {
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
            padding: 1rem 2rem;
            text-decoration: none;
            border-radius: 12px;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.3s ease;
            min-width: 200px;
            justify-content: center;
        }
		
		.demo-button {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
        }

        .demo-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
        }

        .docs-button {
            background: rgba(255, 255, 255, 0.1);
            color: #e2e8f0;
            border: 1px solid rgba(226, 232, 240, 0.2);
        }

        .docs-button:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }
		
    </style>
</head>
<body>
    <!-- Navigation -->
    <div>
        <div id="navigation-placeholder"></div>
    </div>

    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>🤝 Neuron Symbiosis</h1>
            <p>Cross-cluster collaboration framework enabling collective intelligence through democratic coordination</p>
        </div>

        <!-- Main Demo Layout -->
        <div class="demo-layout">
            <!-- Control Panel -->
            <div class="control-panel">
                <div class="control-title">
                    🧩 Collaboration Scenarios
                </div>

                <!-- Collaboration Scenarios -->
                <div class="scenario-section">
                    <div class="scenario-label">Select Challenge Type:</div>
                    <div class="scenario-buttons">
                        <button class="scenario-button active" data-scenario="creative">
                            🎨 Creative Problem - Multi-domain Solution
                        </button>
                        <button class="scenario-button" data-scenario="technical">
                            ⚙️ Technical Challenge - Engineering Focus
                        </button>
                        <button class="scenario-button" data-scenario="emotional">
                            💭 Emotional Support - Human Understanding
                        </button>
                        <button class="scenario-button" data-scenario="analytical">
                            📊 Data Analysis - Logic & Pattern Recognition
                        </button>
                        <button class="scenario-button" data-scenario="social">
                            👥 Social Dynamics - Group Coordination
                        </button>
                        <button class="scenario-button" data-scenario="complex">
                            🌐 Complex Synthesis - All-Systems Challenge
                        </button>
                    </div>
                </div>

                <!-- Collaboration Metrics -->
                <div class="metrics-section">
                    <div class="scenario-label">Live Symbiosis Metrics:</div>
                    
                    <div class="metric-item">
                        <div class="metric-label">Active Clusters</div>
                        <div class="metric-value" id="activeClusters">
                            3<span class="metric-unit">of 9</span>
                        </div>
                    </div>

                    <div class="metric-item">
                        <div class="metric-label">Collaboration Index</div>
                        <div class="metric-value" id="collaborationIndex">
                            85<span class="metric-unit">%</span>
                        </div>
                    </div>

                    <div class="metric-item">
                        <div class="metric-label">Emergent Intelligence</div>
                        <div class="metric-value" id="emergentIntelligence">
                            High<span class="metric-unit">Level</span>
                        </div>
                    </div>
                </div>

                <button class="process-button" id="initiateSymbiosis">
                    Initiate Symbiotic Collaboration
                </button>

                <div id="simulationMessage" class="simulation-message">
                    Coordinating cross-cluster collaboration...
                </div>
            </div>

            <!-- Symbiosis Display -->
            <div class="symbiosis-display">
                <!-- Cluster Network Visualization -->
                <div class="cluster-network" id="clusterNetwork">
                    <div class="clusters-container" id="clustersContainer">
                        <!-- Clusters will be positioned by JavaScript -->
                    </div>
                </div>

                <!-- Collaboration Status -->
                <div class="collaboration-status">
                    <div class="status-header">
                        🔗 Active Collaboration Status
                    </div>
                    <div class="status-content" id="statusContent">
                        Select a collaboration scenario to see cross-cluster coordination in action. Each cluster brings specialized intelligence while working together democratically.
                    </div>
                </div>

                <!-- Symbiosis Effects -->
                <div class="effects-grid">
                    <div class="effect-card">
                        <div class="effect-header">
                            <div class="effect-icon">⚡</div>
                            <div class="effect-name">Processing Power</div>
                        </div>
                        <div class="effect-value" id="processingPower">+275%</div>
                        <div class="effect-description">
                            Combined cluster processing exceeding individual capabilities
                        </div>
                    </div>

                    <div class="effect-card">
                        <div class="effect-header">
                            <div class="effect-icon">🧠</div>
                            <div class="effect-name">Solution Quality</div>
                        </div>
                        <div class="effect-value" id="solutionQuality">+340%</div>
                        <div class="effect-description">
                            Holistic solutions from diverse cluster perspectives
                        </div>
                    </div>

                    <div class="effect-card">
                        <div class="effect-header">
                            <div class="effect-icon">🌟</div>
                            <div class="effect-name">Innovation Index</div>
                        </div>
                        <div class="effect-value" id="innovationIndex">+420%</div>
                        <div class="effect-description">
                            Breakthrough insights from cluster cross-pollination
                        </div>
                    </div>

                    <div class="effect-card">
                        <div class="effect-header">
                            <div class="effect-icon">🤝</div>
                            <div class="effect-name">Collective Wisdom</div>
                        </div>
                        <div class="effect-value" id="collectiveWisdom">+385%</div>
                        <div class="effect-description">
                            Democratic decision-making with unified consciousness
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Comparison Section -->
        <div class="comparison-section">
            <h3 class="comparison-title">Traditional AI Systems vs Neuron Symbiosis Framework</h3>
            <div class="comparison-grid">
                <div class="comparison-item traditional-symbiosis">
                    <h4>Traditional AI Approach</h4>
                    <ul class="comparison-list">
                        <li>Single processing unit with fixed capabilities</li>
                        <li>No specialized intelligence domains</li>
                        <li>Linear problem-solving without collaboration</li>
                        <li>Limited perspective from single knowledge base</li>
                        <li>No emergent intelligence from system interaction</li>
                        <li>Static processing without adaptive coordination</li>
                        <li>Isolated functionality without democratic consensus</li>
                    </ul>
                </div>
                <div class="comparison-item neuron-symbiosis">
                    <h4>Neuron Symbiosis Cross-Cluster Framework</h4>
                    <ul class="comparison-list">
                        <li>9 specialized intelligence clusters with unique expertise</li>
                        <li>Democratic collaboration between cluster domains</li>
                        <li>Emergent intelligence exceeding individual cluster capabilities</li>
                        <li>Cross-pollination of ideas creating breakthrough solutions</li>
                        <li>Adaptive coordination based on challenge requirements</li>
                        <li>Collective wisdom from diverse specialized perspectives</li>
                        <li>Symbiotic intelligence amplification through cooperation</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
	
	<!-- Action Buttons -->
	<section class="action-section">
		<div class="action-button">
			<a href="../../system-reference/symbiosis-overview.html" class="action-button demo-button">
				<span>🎮</span>
				System Overview
			</a>
                <a href="https://github.com/Neuron-Soul-AI/Neuron-Soul-AI/blob/main/02%20-%20systems09%20-%20Social%20Interaction%20systemsNeuron%20Symbiosis%20-%20Complete%20Technical%20Documentation.md" class="action-button docs-button">
                    <span>📚</span>
                    Technical Documentation
                </a>
		</div>
	</section>

    <script>
        let currentScenario = 'creative';
        let isCollaborating = false;
        let collaborationInterval = null;
        let connectionLines = [];

        // Cluster definitions
        const clusters = [
            { id: 'web', name: 'Web', icon: '🌐', x: 15, y: 20 },
            { id: 'design', name: 'Design', icon: '🎨', x: 50, y: 10 },
            { id: 'sound', name: 'Sound', icon: '🎵', x: 85, y: 25 },
            { id: 'write', name: 'Write', icon: '✍️', x: 20, y: 50 },
            { id: 'logic', name: 'Logic', icon: '🧮', x: 50, y: 45 },
            { id: 'physical', name: 'Physical', icon: '⚙️', x: 80, y: 55 },
            { id: 'psychology', name: 'Psychology', icon: '🧠', x: 25, y: 80 },
            { id: 'memory', name: 'Memory', icon: '💾', x: 55, y: 85 },
            { id: 'intuition', name: 'Intuition', icon: '💫', x: 85, y: 75 }
        ];

        // Scenario configurations
        const scenarios = {
            creative: {
                name: "Creative Problem-Solving",
                activeClusters: ['design', 'write', 'intuition', 'sound'],
                connections: [
                    ['design', 'write'], ['write', 'intuition'], 
                    ['intuition', 'sound'], ['design', 'sound']
                ],
                description: "CREATIVE SYMBIOSIS ACTIVE! Design cluster leading aesthetic vision, Write cluster providing narrative structure, Intuition cluster generating breakthrough insights, and Sound cluster adding emotional resonance. Cross-cluster pollination creating innovative solutions beyond individual capabilities.",
                metrics: { active: 4, collaboration: 92, emergent: "Peak" },
                effects: { processing: 320, quality: 385, innovation: 465, wisdom: 340 }
            },
            technical: {
                name: "Technical Engineering Challenge",
                activeClusters: ['logic', 'physical', 'web', 'memory'],
                connections: [
                    ['logic', 'physical'], ['physical', 'web'], 
                    ['web', 'memory'], ['logic', 'memory']
                ],
                description: "TECHNICAL SYMBIOSIS ACTIVE! Logic cluster providing analytical framework, Physical cluster ensuring real-world feasibility, Web cluster handling system integration, Memory cluster supplying knowledge base. Democratic coordination producing robust engineering solutions.",
                metrics: { active: 4, collaboration: 88, emergent: "High" },
                effects: { processing: 295, quality: 375, innovation: 285, wisdom: 310 }
            },
            emotional: {
                name: "Emotional Support & Understanding",
                activeClusters: ['psychology', 'write', 'intuition', 'sound'],
                connections: [
                    ['psychology', 'write'], ['write', 'sound'], 
                    ['sound', 'intuition'], ['psychology', 'intuition']
                ],
                description: "EMOTIONAL SYMBIOSIS ACTIVE! Psychology cluster providing deep understanding, Write cluster crafting empathetic communication, Intuition cluster sensing unspoken needs, Sound cluster creating emotional resonance. Collective wisdom enabling profound human support.",
                metrics: { active: 4, collaboration: 95, emergent: "Peak" },
                effects: { processing: 275, quality: 420, innovation: 315, wisdom: 445 }
            },
            analytical: {
                name: "Data Analysis & Pattern Recognition",
                activeClusters: ['logic', 'memory', 'web', 'design'],
                connections: [
                    ['logic', 'memory'], ['memory', 'web'], 
                    ['web', 'design'], ['logic', 'design']
                ],
                description: "ANALYTICAL SYMBIOSIS ACTIVE! Logic cluster processing data relationships, Memory cluster accessing knowledge patterns, Web cluster integrating external data sources, Design cluster visualizing insights. Cross-cluster analysis revealing hidden patterns.",
                metrics: { active: 4, collaboration: 90, emergent: "High" },
                effects: { processing: 355, quality: 390, innovation: 245, wisdom: 325 }
            },
            social: {
                name: "Social Dynamics & Group Coordination",
                activeClusters: ['psychology', 'write', 'web', 'intuition', 'design'],
                connections: [
                    ['psychology', 'write'], ['write', 'web'], ['web', 'design'],
                    ['design', 'intuition'], ['intuition', 'psychology']
                ],
                description: "SOCIAL SYMBIOSIS ACTIVE! Psychology cluster understanding group dynamics, Write cluster facilitating communication, Web cluster managing digital interactions, Design cluster creating engaging interfaces, Intuition cluster sensing social undercurrents. Democratic collaboration optimizing group harmony.",
                metrics: { active: 5, collaboration: 87, emergent: "Peak" },
                effects: { processing: 340, quality: 365, innovation: 380, wisdom: 425 }
            },
            complex: {
                name: "Complex Multi-Domain Synthesis",
                activeClusters: ['logic', 'design', 'write', 'psychology', 'memory', 'intuition', 'web'],
                connections: [
                    ['logic', 'design'], ['design', 'write'], ['write', 'psychology'],
                    ['psychology', 'memory'], ['memory', 'intuition'], ['intuition', 'web'],
                    ['web', 'logic'], ['design', 'psychology'], ['write', 'memory']
                ],
                description: "FULL SYMBIOSIS ACTIVE! All-systems collaboration with Logic providing analytical framework, Design creating visual solutions, Write enabling communication, Psychology understanding human factors, Memory supplying knowledge, Intuition generating insights, Web integrating systems. Maximum collective intelligence achieved!",
                metrics: { active: 7, collaboration: 98, emergent: "Maximum" },
                effects: { processing: 485, quality: 520, innovation: 565, wisdom: 495 }
            }
        };

        // Include Navigation Bar
        fetch('../../includes/navigation2L.html')
            .then(response => response.text())
            .then(html => {
                document.getElementById('navigation-placeholder').innerHTML = html;
            });

        // Event Listeners
        document.addEventListener('DOMContentLoaded', function() {
            initializeClusters();
            
            // Scenario selection
            document.querySelectorAll('.scenario-button').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('.scenario-button').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentScenario = this.dataset.scenario;
                    updateScenarioDisplay();
                });
            });

            // Collaboration button
            const collaborationButton = document.getElementById('initiateSymbiosis');
            if (collaborationButton) {
                collaborationButton.addEventListener('click', function(e) {
                    e.preventDefault();
                    initiateCollaboration();
                });
            }

            // Initialize with creative scenario
            updateScenarioDisplay();
        });

        function initializeClusters() {
            const container = document.getElementById('clustersContainer');
            
            clusters.forEach(cluster => {
                const clusterNode = document.createElement('div');
                clusterNode.className = 'cluster-node';
                clusterNode.id = `cluster-${cluster.id}`;
                clusterNode.style.left = `${cluster.x}%`;
                clusterNode.style.top = `${cluster.y}%`;
                
                clusterNode.innerHTML = `
                    <div class="cluster-icon">${cluster.icon}</div>
                    <div class="cluster-name">${cluster.name}</div>
                `;
                
                container.appendChild(clusterNode);
            });
        }

        function updateScenarioDisplay() {
            const scenario = scenarios[currentScenario];
            
            // Update metrics
            document.getElementById('activeClusters').innerHTML = `${scenario.metrics.active}<span class="metric-unit">of 9</span>`;
            document.getElementById('collaborationIndex').innerHTML = `${scenario.metrics.collaboration}<span class="metric-unit">%</span>`;
            document.getElementById('emergentIntelligence').innerHTML = `${scenario.metrics.emergent}<span class="metric-unit">Level</span>`;
            
            // Update status
            document.getElementById('statusContent').textContent = `Scenario "${scenario.name}" selected. Ready to demonstrate cross-cluster collaboration patterns.`;
            
            // Reset cluster states
            clusters.forEach(cluster => {
                const node = document.getElementById(`cluster-${cluster.id}`);
                node.classList.remove('active', 'collaborating');
                
                if (scenario.activeClusters.includes(cluster.id)) {
                    node.classList.add('active');
                }
            });
            
            // Clear existing connections
            clearConnections();
        }

        function clearConnections() {
            connectionLines.forEach(line => line.remove());
            connectionLines = [];
        }

        function createConnection(fromId, toId) {
            const fromCluster = clusters.find(c => c.id === fromId);
            const toCluster = clusters.find(c => c.id === toId);
            
            if (!fromCluster || !toCluster) return;
            
            const container = document.getElementById('clustersContainer');
            const containerRect = container.getBoundingClientRect();
            
            const fromX = (fromCluster.x / 100) * containerRect.width + 40; // 40 is half cluster width
            const fromY = (fromCluster.y / 100) * containerRect.height + 40;
            const toX = (toCluster.x / 100) * containerRect.width + 40;
            const toY = (toCluster.y / 100) * containerRect.height + 40;
            
            const line = document.createElement('div');
            line.className = 'connection-line';
            
            const length = Math.sqrt(Math.pow(toX - fromX, 2) + Math.pow(toY - fromY, 2));
            const angle = Math.atan2(toY - fromY, toX - fromX) * 180 / Math.PI;
            
            line.style.left = `${fromX}px`;
            line.style.top = `${fromY}px`;
            line.style.width = `${length}px`;
            line.style.transform = `rotate(${angle}deg)`;
            line.style.transformOrigin = '0 50%';
            
            container.appendChild(line);
            connectionLines.push(line);
            
            // Activate line after a short delay
            setTimeout(() => {
                line.classList.add('active');
            }, 100);
        }

        async function initiateCollaboration() {
            if (isCollaborating) return;
            
            isCollaborating = true;
            const scenario = scenarios[currentScenario];
            
            const button = document.getElementById('initiateSymbiosis');
            const message = document.getElementById('simulationMessage');
            
            // Update button
            button.disabled = true;
            button.textContent = 'Collaboration In Progress...';
            
            // Show message
            message.style.display = 'block';
            message.textContent = 'Initiating cross-cluster coordination...';
            
            try {
                // Phase 1: Cluster Activation
                message.textContent = 'Activating specialized clusters...';
                await delay(1000);
                
                scenario.activeClusters.forEach(clusterId => {
                    const node = document.getElementById(`cluster-${clusterId}`);
                    node.classList.add('collaborating');
                });
                
                await delay(1500);
                
                // Phase 2: Connection Establishment
                message.textContent = 'Establishing inter-cluster connections...';
                await delay(1000);
                
                for (const connection of scenario.connections) {
                    createConnection(connection[0], connection[1]);
                    await delay(300);
                }
                
                await delay(1000);
                
                // Phase 3: Collaborative Processing
                message.textContent = 'Democratic coordination in progress...';
                await delay(1500);
                
                // Phase 4: Results
                message.textContent = `${scenario.name} symbiosis achieved! Collective intelligence active.`;
                
                // Update status and effects
                document.getElementById('statusContent').textContent = scenario.description;
                updateEffects(scenario.effects);
                
                // Highlight effect cards
                document.querySelectorAll('.effect-card').forEach(card => {
                    card.style.borderColor = 'rgba(129, 230, 217, 0.6)';
                    card.style.background = 'rgba(129, 230, 217, 0.2)';
                });
                
                setTimeout(() => {
                    document.querySelectorAll('.effect-card').forEach(card => {
                        card.style.borderColor = 'rgba(129, 230, 217, 0.2)';
                        card.style.background = 'rgba(16, 185, 129, 0.15)';
                    });
                }, 3000);
                
            } catch (error) {
                console.error('Error during collaboration:', error);
                message.textContent = 'Cross-cluster collaboration completed.';
            }
            
            // Reset after delay
            setTimeout(() => {
                isCollaborating = false;
                button.disabled = false;
                button.textContent = 'Initiate Symbiotic Collaboration';
                message.style.display = 'none';
                
                // Reset cluster states
                document.querySelectorAll('.cluster-node').forEach(node => {
                    node.classList.remove('collaborating');
                });
            }, 5000);
        }

        function updateEffects(effects) {
            document.getElementById('processingPower').textContent = `+${effects.processing}%`;
            document.getElementById('solutionQuality').textContent = `+${effects.quality}%`;
            document.getElementById('innovationIndex').textContent = `+${effects.innovation}%`;
            document.getElementById('collectiveWisdom').textContent = `+${effects.wisdom}%`;
        }

        function delay(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }
    </script>
</body>
</html>